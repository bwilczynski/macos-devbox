DEVBOX_DOCKER_IMAGE={{ devbox_image }}
DEVBOX_HOME=/root

devbox() {
  cmd=$*

  docker run --pull always \
    -it --rm \
    -v /run/host-services/ssh-auth.sock:/run/host-services/ssh-auth.sock \
    -e SSH_AUTH_SOCK="/run/host-services/ssh-auth.sock" \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v $HOME/.kube:$DEVBOX_HOME/.kube \
    -v $HOME/.config/git:$DEVBOX_HOME/.config/git \
    -v $PWD:$DEVBOX_HOME/shared \
    -w $DEVBOX_HOME/shared \
    $DEVBOX_DOCKER_IMAGE ${cmd}
}